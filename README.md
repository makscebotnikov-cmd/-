# Домашнее задание к занятию 2 `«Резервное копирование»` - `Чеботников М.Б.`

## Задание 1
> Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию `/tmp/backup` </br>
Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)</br>
Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.</br>
На проверку направить скриншот с командой и результатом ее выполнения</br>

>rsync -avP --checksum --exclude=".*" ~/ /tmp/backup
<img width="543" height="186" alt="1" src="https://github.com/user-attachments/assets/15142ef9-4a36-4bfc-b79a-d0a68286cea5" />

---

## Задание 2
> Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.</br>
Резервная копия должна быть полностью зеркальной</br>
Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции</br>
Резервная копия размещается локально, в директории `/tmp/backup`</br>
На проверку направить файл crontab и скриншот с результатом работы утилиты.

[backup.sh](./backup.sh)

```bash
#!/bin/bash

# Исходная директория
SOURCE_DIR="/home/night"
# Целевая директория
TARGET_DIR="/tmp/backup"
# Команда rsync. Cтандартный вывод - в /dev/null, ошибки - в лог.
rsync -a --checksum --exclude=".*" "$SOURCE_DIR" "$TARGET_DIR" > /dev/null 2>> /var/log/backup.log

# Проверка кода завершения rsync и запись лога
if [ $? -eq 0 ]; then
    echo "[$(date)] Резервное копирование успешно выполнено" >> /var/log/backup.log
else
    echo "[$(date)] Ошибка при выполнении резервного копирования" >> /var/log/backup.log
fi

```

[crontabs](./crontabs)

```bash
0 0 * * * /home/night/backup.sh
```

<img width="1238" height="112" alt="2" src="https://github.com/user-attachments/assets/7c31f9f1-b00b-4574-862c-d6583d30aa8e" />
